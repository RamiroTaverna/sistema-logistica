<section class="page-header">
  <div>
    <h1>{{ isEdit ? 'Editar envío' : 'Crear envío' }}</h1>
    <p class="muted">Formulario reactivo con validaciones y persistencia simulada en localStorage.</p>
  </div>
  <a class="button secondary" routerLink="/shipments">Volver</a>
</section>

<div class="card">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-grid">
    <div class="form-control">
      <label for="tracking">Tracking</label>
      <input id="tracking" formControlName="trackingCode" placeholder="PKG-009-ARG" />
      <div class="form-error" *ngIf="getFieldError('trackingCode')">{{ getFieldError('trackingCode') }}</div>
    </div>

    <div class="form-control">
      <label for="sender">Remitente</label>
      <input id="sender" formControlName="sender" />
      <div class="form-error" *ngIf="getFieldError('sender')">{{ getFieldError('sender') }}</div>
    </div>

    <div class="form-control">
      <label for="recipient">Destinatario</label>
      <input id="recipient" formControlName="recipient" />
      <div class="form-error" *ngIf="getFieldError('recipient')">{{ getFieldError('recipient') }}</div>
    </div>

    <div class="form-control">
      <label for="origin">Origen</label>
      <input id="origin" formControlName="origin" />
      <div class="form-error" *ngIf="getFieldError('origin')">{{ getFieldError('origin') }}</div>
    </div>

    <div class="form-control">
      <label for="destination">Destino</label>
      <input id="destination" formControlName="destination" />
      <div class="form-error" *ngIf="getFieldError('destination')">{{ getFieldError('destination') }}</div>
    </div>

    <div class="form-control">
      <label for="status">Estado</label>
      <select id="status" formControlName="status">
        <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
      </select>
    </div>

    <div class="form-control">
      <label for="priority">Prioridad</label>
      <select id="priority" formControlName="priority">
        <option *ngFor="let priority of priorities" [value]="priority">{{ priority }}</option>
      </select>
    </div>

    <div class="form-control">
      <label for="weightKg">Peso (kg)</label>
      <input id="weightKg" type="number" step="0.1" formControlName="weightKg" />
      <div class="form-error" *ngIf="getFieldError('weightKg')">{{ getFieldError('weightKg') }}</div>
    </div>

    <div class="form-control">
      <label for="cost">Costo</label>
      <input id="cost" type="number" step="0.01" formControlName="cost" />
      <div class="form-error" *ngIf="getFieldError('cost')">{{ getFieldError('cost') }}</div>
    </div>

    <div class="form-control">
      <label for="createdAt">Creado</label>
      <input id="createdAt" type="date" formControlName="createdAt" />
    </div>

    <div class="form-control">
      <label for="eta">ETA</label>
      <input id="eta" type="date" formControlName="eta" />
      <div class="form-error" *ngIf="getFieldError('eta')">{{ getFieldError('eta') }}</div>
    </div>

    <div class="form-control" style="grid-column: 1/-1">
      <label for="notes">Notas</label>
      <textarea id="notes" formControlName="notes" placeholder="Indicaciones, referencias o seguros..."></textarea>
    </div>

    <div style="grid-column: 1/-1; display: flex; gap: 0.75rem">
      <button class="button" type="submit">{{ isEdit ? 'Actualizar' : 'Crear' }}</button>
      <a class="button secondary" routerLink="/shipments">Cancelar</a>
    </div>
  </form>
</div>
